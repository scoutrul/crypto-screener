# üìã –õ–æ–≥–∏–∫–∞ Watchlist –∏ Trade List

## üîÑ –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–¥–≤–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–ø–∏—Å–∫–∞** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º —Å–¥–µ–ª–æ–∫:

- **üìã Watchlist**: –ú–æ–Ω–µ—Ç—ã —Å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–º–∏ –∞–Ω–æ–º–∞–ª–∏—è–º–∏, –æ–∂–∏–¥–∞—é—â–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- **üìä Trade List**: –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–¥–µ–ª–∫–∏, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ –¥–ª—è TP/SL

## ‚è∞ –ß–∞—Å—Ç–æ—Ç–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –ü–æ—Ç–æ–∫ 2: Watchlist (30 —Å–µ–∫—É–Ω–¥)
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª**: –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- **–ó–∞–¥–∞—á–∞**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö –º–æ–Ω–µ—Ç –≤ watchlist
- **–î–µ–π—Å—Ç–≤–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤—Ö–æ–¥–∞, —Ç–∞–π–º–∞—É—Ç

### –ü–æ—Ç–æ–∫ 3: Trade List (30 —Å–µ–∫—É–Ω–¥)
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª**: –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- **–ó–∞–¥–∞—á–∞**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–¥–µ–ª–æ–∫
- **–î–µ–π—Å—Ç–≤–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ TP/SL, –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–¥–µ–ª–æ–∫

## üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –º–æ–Ω–µ—Ç—ã

### 1. üîç –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∞–Ω–æ–º–∞–ª–∏–∏
```
üö® –ê–Ω–æ–º–∞–ª–∏—è –æ–±—ä–µ–º–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –¥–ª—è BTC/USDT!
üìà –¢–∏–ø —Å–¥–µ–ª–∫–∏: Long
üìù –ê–Ω–æ–º–∞–ª–∏—è BTC/USDT –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ pending (Long)
```

**–î–µ–π—Å—Ç–≤–∏—è:**
- –ú–æ–Ω–µ—Ç–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ **watchlist**
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `watchlistTime`
- –°–æ–∑–¥–∞–µ—Ç—Å—è `anomalyId`

### 2. ‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –≤ Watchlist
```
‚è≥ [–ü–û–¢–û–ö 2] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ 5 –º–æ–Ω–µ—Ç –≤ watchlist...
üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º pending anomaly –¥–ª—è BTC/USDT...
   üìä –í—Ä–µ–º—è –≤ watchlist: 2 TF
   üìä –ù—É–∂–Ω–æ —Å–≤–µ—á–µ–π: 2 –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
‚ùå –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–µ –ø–æ–ª—É—á–µ–Ω–æ –¥–ª—è BTC/USDT (–∏–∑–º–µ–Ω–µ–Ω–∏–µ: 0.25%)
üìã BTC/USDT –æ—Å—Ç–∞–µ—Ç—Å—è –≤ watchlist –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
```

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤—Ö–æ–¥–∞ (2 —Å–≤–µ—á–∏)
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤ watchlist
- –¢–∞–π–º–∞—É—Ç —á–µ—Ä–µ–∑ 4 TF (1 —á–∞—Å)

### 3. ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ
```
‚úÖ –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ –¥–ª—è BTC/USDT!
üí∞ –°–æ–∑–¥–∞–Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Å–¥–µ–ª–∫–∞ Long –¥–ª—è BTC/USDT –ø–æ —Ü–µ–Ω–µ $45000.00
‚úÖ BTC/USDT –ø–µ—Ä–µ–º–µ—â–µ–Ω –∏–∑ watchlist –≤ trade list
```

**–î–µ–π—Å—Ç–≤–∏—è:**
- –ú–æ–Ω–µ—Ç–∞ —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ **watchlist**
- –ú–æ–Ω–µ—Ç–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ **trade list**
- –°–æ–∑–¥–∞–µ—Ç—Å—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Å–¥–µ–ª–∫–∞

### 4. üìä –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤ Trade List
```
üìä [–ü–û–¢–û–ö 3] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ 3 —Å–¥–µ–ª–æ–∫ –≤ trade list...
üìà BTC/USDT (Long): +2.15% | –í—Ö–æ–¥: $45000.00 | –¢–µ–∫—É—â–∞—è: $45967.50
```

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å TP/SL —É—Ä–æ–≤–Ω—è–º–∏
- –ë—ã—Å—Ç—Ä–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏

### 5. üîí –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–¥–µ–ª–∫–∏
```
üîí –ó–∞–∫—Ä—ã–≤–∞–µ–º —Å–¥–µ–ª–∫—É BTC/USDT (Long): +3.00% - take_profit
üóëÔ∏è BTC/USDT —É–¥–∞–ª–µ–Ω –∏–∑ trade list –∏ watchlist
```

**–î–µ–π—Å—Ç–≤–∏—è:**
- –°–¥–µ–ª–∫–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ TP/SL
- –ú–æ–Ω–µ—Ç–∞ —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ **trade list**
- –ú–æ–Ω–µ—Ç–∞ —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ **watchlist** (–µ—Å–ª–∏ —Ç–∞–º –±—ã–ª–∞)

## ‚è∞ –¢–∞–π–º–∞—É—Ç—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### Watchlist —Ç–∞–π–º–∞—É—Ç
- **–õ–∏–º–∏—Ç**: 4 TF (1 —á–∞—Å)
- **–î–µ–π—Å—Ç–≤–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ watchlist
- **–õ–æ–≥–∏–∫–∞**: `watchlistTime + 4 TF >= —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è`

```
‚è∞ BTC/USDT –≤ watchlist —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ (4 TF = 1 —á–∞—Å–æ–≤), —É–¥–∞–ª—è–µ–º –∏–∑ watchlist
```

### –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞–Ω–æ–º–∞–ª–∏–π
–ú–æ–Ω–µ—Ç—ã –≤ watchlist –∏–ª–∏ trade list **–Ω–µ –¥–µ—Ç–µ–∫—Ç—è—Ç—Å—è** –ø–æ–≤—Ç–æ—Ä–Ω–æ:

```
‚è≥ BTC/USDT —É–∂–µ –≤ watchlist, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ
üí∞ BTC/USDT —É–∂–µ –≤ –∞–∫—Ç–∏–≤–Ω–æ–π —Å–¥–µ–ª–∫–µ, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### Watchlist (pendingAnomalies)
```javascript
{
  anomalyId: "BTC_1753771234567",
  tradeType: "Long",
  anomalyTime: "2025-07-29T10:00:00.000Z",
  watchlistTime: "2025-07-29T10:00:00.000Z", // –í—Ä–µ–º—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ watchlist
  anomalyCandleIndex: 10,
  anomalyPrice: 45000.00,
  historicalPrice: 44800.00
}
```

### Trade List (activeTrades)
```javascript
{
  id: "BTC/USDT_1753771234567",
  anomalyId: "BTC_1753771234567",
  symbol: "BTC/USDT",
  type: "Long",
  entryPrice: 45000.00,
  stopLoss: 44550.00,
  takeProfit: 46350.00,
  entryTime: "2025-07-29T10:15:00.000Z",
  status: "open",
  virtualAmount: 1000,
  priceHistory: [...]
}
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å–∏—Å—Ç–µ–º—ã

### ‚ö° –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Watchlist**: –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- **Trade List**: –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- **–ù–µ—Ç –ø—Ä–æ–ø—É—Å–∫–∞ TP/SL**: –±—ã—Å—Ç—Ä–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### üîí –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞–Ω–æ–º–∞–ª–∏–π**: –º–æ–Ω–µ—Ç—ã –≤ —Å–ø–∏—Å–∫–∞—Ö –Ω–µ –¥–µ—Ç–µ–∫—Ç—è—Ç—Å—è
- **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ ID**: –∫–∞–∂–¥–∞—è –∞–Ω–æ–º–∞–ª–∏—è/—Å–¥–µ–ª–∫–∞ –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞**: —Ç–∞–π–º–∞—É—Ç—ã –∏ –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–¥–µ–ª–æ–∫

### üìà –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- **Watchlist**: —Ç–æ–ª—å–∫–æ –Ω–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ –∞–Ω–æ–º–∞–ª–∏–∏
- **Trade List**: —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–¥–µ–ª–∫–∏
- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**: —Ä–∞–∑–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
```javascript
// –ü–æ—Ç–æ–∫ 2: Watchlist
this.pendingCheckInterval = 30 * 1000; // 30 —Å–µ–∫—É–Ω–¥

// –ü–æ—Ç–æ–∫ 3: Trade List  
this.activeTradesInterval = 30 * 1000; // 30 —Å–µ–∫—É–Ω–¥
```

### –¢–∞–π–º–∞—É—Ç—ã
```javascript
// Watchlist —Ç–∞–π–º–∞—É—Ç
const WATCHLIST_TIMEOUT = 4; // 4 TF = 1 —á–∞—Å

// –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—Ö–æ–¥–∞
const ENTRY_CONFIRMATION_TFS = 2; // 2 —Å–≤–µ—á–∏
```

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–∏–ø–∏—á–Ω—ã–µ –ª–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã
```
‚è∞ –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∑–∞–ø—É—â–µ–Ω–∞:
   üîç –ü–æ—Ç–æ–∫ 1 (–∞–Ω–æ–º–∞–ª–∏–∏): –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
   ‚è≥ –ü–æ—Ç–æ–∫ 2 (watchlist): –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
   üìä –ü–æ—Ç–æ–∫ 3 (–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–¥–µ–ª–∫–∏): –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥

‚è≥ [–ü–û–¢–û–ö 2] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ 3 –º–æ–Ω–µ—Ç –≤ watchlist...
üìä [–ü–û–¢–û–ö 3] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ 2 —Å–¥–µ–ª–æ–∫ –≤ trade list...

‚úÖ BTC/USDT –ø–µ—Ä–µ–º–µ—â–µ–Ω –∏–∑ watchlist –≤ trade list
üóëÔ∏è BTC/USDT —É–¥–∞–ª–µ–Ω –∏–∑ trade list –∏ watchlist
```

## üîÆ WebSocket –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è
1. **Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ü–µ–Ω
2. **WebSocket Provider**: –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
3. **–°–Ω–∏–∂–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–µ–∫**: —É–±—Ä–∞—Ç—å HTTP –∑–∞–ø—Ä–æ—Å—ã
4. **–£–ª—É—á—à–µ–Ω–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å**: —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è TP/SL

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ WebSocket
```javascript
class WebSocketProvider {
  subscribeToWatchlist(callback) { /* ... */ }
  subscribeToTradeList(callback) { /* ... */ }
  subscribeToPriceUpdates(symbols, callback) { /* ... */ }
}
``` 