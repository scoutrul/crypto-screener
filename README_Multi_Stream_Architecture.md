# üöÄ –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **3 –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –ø–æ—Ç–æ–∫–∞** —Å —Ä–∞–∑–Ω–æ–π —á–∞—Å—Ç–æ—Ç–æ–π –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä—ã–Ω–∫–∞ –∏ –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã.

## üîÑ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—Ç–æ–∫–æ–≤

### –ü–æ—Ç–æ–∫ 1: –ü–æ–∏—Å–∫ –∞–Ω–æ–º–∞–ª–∏–π (5 –º–∏–Ω—É—Ç)
- **–ß–∞—Å—Ç–æ—Ç–∞**: –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- **–ó–∞–¥–∞—á–∞**: –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –º–æ–Ω–µ—Ç –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –∞–Ω–æ–º–∞–ª–∏–π –æ–±—ä–µ–º–∞
- **–ú–µ—Ç–æ–¥**: `runAnomalyCheck()`
- **WebSocket-–≥–æ—Ç–æ–≤—ã–π**: ‚úÖ

### –ü–æ—Ç–æ–∫ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ pending anomalies (1 –º–∏–Ω—É—Ç–∞)
- **–ß–∞—Å—Ç–æ—Ç–∞**: –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
- **–ó–∞–¥–∞—á–∞**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤—Ö–æ–¥–∞ –¥–ª—è pending anomalies
- **–ú–µ—Ç–æ–¥**: `runPendingCheck()`
- **WebSocket-–≥–æ—Ç–æ–≤—ã–π**: ‚úÖ
- **–°–≤–µ—á–∏**: 15-–º–∏–Ω—É—Ç–Ω—ã–µ (–∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)

### –ü–æ—Ç–æ–∫ 3: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ (30 —Å–µ–∫—É–Ω–¥)
- **–ß–∞—Å—Ç–æ—Ç–∞**: –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- **–ó–∞–¥–∞—á–∞**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ü–µ–Ω –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è
- **–ú–µ—Ç–æ–¥**: `runActiveTradesCheck()`
- **WebSocket-–≥–æ—Ç–æ–≤—ã–π**: ‚úÖ
- **–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å**: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–ø—É—Å–∫ TP/SL

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### ‚ö° –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–¥–µ–ª–∫–∏**: –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- **Pending**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
- **–ê–Ω–æ–º–∞–ª–∏–∏**: –ø–æ–∏—Å–∫ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç

### üîß WebSocket-–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å
–í—Å–µ –º–µ—Ç–æ–¥—ã –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –ø–µ—Ä–µ—Ö–æ–¥—É –Ω–∞ WebSocket:
```javascript
// –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (REST API)
await this.runActiveTradesCheck();

// –ë—É–¥—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (WebSocket)
this.websocketProvider.subscribeToTrades(this.runActiveTradesCheck);
```

### üìä –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- **–ü–æ—Ç–æ–∫ 1**: –¢—è–∂–µ–ª—ã–π - —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –≤—Å–µ –º–æ–Ω–µ—Ç—ã
- **–ü–æ—Ç–æ–∫ 2**: –°—Ä–µ–¥–Ω–∏–π - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–ª—å–∫–æ pending
- **–ü–æ—Ç–æ–∫ 3**: –õ–µ–≥–∫–∏–π - —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–¥–µ–ª–∫–∏

## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
```bash
npm run monitor:virtual
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤
```bash
npm run test:multi-stream
```

### –õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã
```
‚è∞ –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∑–∞–ø—É—â–µ–Ω–∞:
   üîç –ü–æ—Ç–æ–∫ 1 (–∞–Ω–æ–º–∞–ª–∏–∏): –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
   ‚è≥ –ü–æ—Ç–æ–∫ 2 (pending): –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
   üìä –ü–æ—Ç–æ–∫ 3 (–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–¥–µ–ª–∫–∏): –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
```

## üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª

### –ó–∞–ø—É—Å–∫
1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ—Ç–æ–∫–æ–≤
2. –ü–µ—Ä–≤—ã–π —Ü–∏–∫–ª –≤—Å–µ—Ö –ø–æ—Ç–æ–∫–æ–≤
3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
4. –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞
1. –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
3. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –õ–æ–≥–∏ –ø–æ—Ç–æ–∫–æ–≤
```
üîç [–ü–û–¢–û–ö 1] –ü–æ–∏—Å–∫ –∞–Ω–æ–º–∞–ª–∏–π —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö –º–æ–Ω–µ—Ç...
‚úÖ [–ü–û–¢–û–ö 1] –ü–æ–∏—Å–∫ –∞–Ω–æ–º–∞–ª–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω

üîç [–ü–û–¢–û–ö 2] –ü—Ä–æ–≤–µ—Ä–∫–∞ 5 pending anomalies...
‚úÖ [–ü–û–¢–û–ö 2] –ü—Ä–æ–≤–µ—Ä–∫–∞ pending anomalies –∑–∞–≤–µ—Ä—à–µ–Ω–∞

üìä [–ü–û–¢–û–ö 3] –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ 3 –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–¥–µ–ª–æ–∫...
‚úÖ [–ü–û–¢–û–ö 3] –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–æ
```

## üîÆ WebSocket –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è
1. **WebSocket Provider**: –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö
2. **Real-time –¥–∞–Ω–Ω—ã–µ**: –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω
3. **–°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏**: –ú–µ–Ω—å—à–µ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
4. **–£–ª—É—á—à–µ–Ω–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å**: –ù–µ—Ç –∑–∞–¥–µ—Ä–∂–µ–∫ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ WebSocket
```javascript
class WebSocketProvider {
  subscribeToAnomalies(callback) { /* ... */ }
  subscribeToPending(callback) { /* ... */ }
  subscribeToActiveTrades(callback) { /* ... */ }
}
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è
- ‚ùå –ü—Ä–æ–ø—É—Å–∫ TP/SL –∏–∑-–∑–∞ 5-–º–∏–Ω—É—Ç–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
- ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- ‚ùå –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ API

### –ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è
- ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–¥–µ–ª–æ–∫ (30 —Å–µ–∫—É–Ω–¥)
- ‚úÖ –¢–æ—á–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ pending (1 –º–∏–Ω—É—Ç–∞)
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞
- ‚úÖ WebSocket-–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å

## üìù –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ)
```javascript
// –í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ CONFIG
this.anomalyCheckInterval = 5 * 60 * 1000;    // 5 –º–∏–Ω—É—Ç
this.pendingCheckInterval = 1 * 60 * 1000;    // 1 –º–∏–Ω—É—Ç–∞
this.activeTradesInterval = 30 * 1000;        // 30 —Å–µ–∫—É–Ω–¥
```

### WebSocket –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```javascript
// –ë—É–¥—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
this.websocketConfig = {
  anomalyCheck: { interval: '5m', candles: '15m' },
  pendingCheck: { interval: '1m', candles: '15m' },
  activeTrades: { interval: '30s', candles: '1m' }
};
``` 