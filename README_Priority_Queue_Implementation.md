# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

## üéØ –ó–∞–¥–∞—á–∞
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏ **–ø–µ—Ä–≤—ã–º –¥–µ–ª–æ–º** –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ `npm run run`.

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `checkPriorityQueue()`
**–§–∞–π–ª**: `scripts/virtual-trading-system.js`

```javascript
async checkPriorityQueue() {
  console.log('üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏...');
  
  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—á–µ—Ä–µ–¥–∏
  console.log(`üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—á–µ—Ä–µ–¥–∏:`);
  console.log(`   ‚Ä¢ –ó–∞–¥–∞—á –≤ –æ—á–µ—Ä–µ–¥–∏: ${this.taskQueue.length}`);
  console.log(`   ‚Ä¢ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞: ${this.isProcessing}`);
  console.log(`   ‚Ä¢ –ü–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–¥–µ–ª–æ–∫: ${this.lastActiveTradesCheck ? new Date(this.lastActiveTradesCheck).toLocaleTimeString() : '–Ω–µ –≤—ã–ø–æ–ª–Ω—è–ª–∞—Å—å'}`);
  console.log(`   ‚Ä¢ –ü–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞ watchlist: ${this.lastPendingCheck ? new Date(this.lastPendingCheck).toLocaleTimeString() : '–Ω–µ –≤—ã–ø–æ–ª–Ω—è–ª–∞—Å—å'}`);
  console.log(`   ‚Ä¢ –ü–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–Ω–æ–º–∞–ª–∏–π: ${this.lastAnomalyCheck ? new Date(this.lastAnomalyCheck).toLocaleTimeString() : '–Ω–µ –≤—ã–ø–æ–ª–Ω—è–ª–∞—Å—å'}`);
  
  // –û—á–∏—Å—Ç–∏—Ç—å –æ—á–µ—Ä–µ–¥—å –µ—Å–ª–∏ –æ–Ω–∞ –≤ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
  if (this.taskQueue.length > 100) {
    console.log('‚ö†Ô∏è –û—á–µ—Ä–µ–¥—å –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∞, –æ—á–∏—â–∞–µ–º...');
    this.taskQueue = [];
    this.isProcessing = false;
  }
  
  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
  const intervalsStatus = {
    activeTrades: !!this.activeTradesInterval,
    pendingCheck: !!this.pendingCheckInterval,
    anomalyCheck: !!this.anomalyCheckInterval
  };
  
  console.log(`‚è∞ –°—Ç–∞—Ç—É—Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤:`);
  console.log(`   ‚Ä¢ –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–¥–µ–ª–∫–∏: ${intervalsStatus.activeTrades ? 'üü¢ –ê–∫—Ç–∏–≤–µ–Ω' : 'üî¥ –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω'}`);
  console.log(`   ‚Ä¢ Watchlist: ${intervalsStatus.pendingCheck ? 'üü¢ –ê–∫—Ç–∏–≤–µ–Ω' : 'üî¥ –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω'}`);
  console.log(`   ‚Ä¢ –ê–Ω–æ–º–∞–ª–∏–∏: ${intervalsStatus.anomalyCheck ? 'üü¢ –ê–∫—Ç–∏–≤–µ–Ω' : 'üî¥ –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω'}`);
  
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—É—é –∑–∞–¥–∞—á—É –µ—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å –ø—É—Å—Ç–∞
  if (this.taskQueue.length === 0) {
    console.log('üì¶ –û—á–µ—Ä–µ–¥—å –ø—É—Å—Ç–∞, –¥–æ–±–∞–≤–ª—è–µ–º –±–∞–∑–æ–≤—É—é –∑–∞–¥–∞—á—É...');
    this.addTaskToQueue(async () => {
      console.log('üîç [–ü–û–¢–û–ö 1] –ë–∞–∑–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –ø–æ–∏—Å–∫–∞ –∞–Ω–æ–º–∞–ª–∏–π...');
      await this.runAnomalyCheck();
    }, 3);
  }
  
  console.log('‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∞');
}
```

### 2. –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω –º–µ—Ç–æ–¥ `initialize()`
**–§–∞–π–ª**: `scripts/virtual-trading-system.js`

```javascript
async initialize() {
  console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏ (REST API)...');
  
  // –ü–ï–†–í–´–ú –î–ï–õ–û–ú - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—É—é –æ—á–µ—Ä–µ–¥—å
  console.log('üîç –ü–ï–†–í–´–ô –ü–†–ò–û–†–ò–¢–ï–¢: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏...');
  await this.checkPriorityQueue();
  
  // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
}
```

### 3. –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω –º–µ—Ç–æ–¥ `start()`
**–§–∞–π–ª**: `scripts/virtual-trading-system.js`

```javascript
async start() {
  try {
    // –ü–ï–†–í–´–ú –î–ï–õ–û–ú - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—É—é –æ—á–µ—Ä–µ–¥—å
    console.log('üîç –ü–ï–†–í–´–ô –ü–†–ò–û–†–ò–¢–ï–¢: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ...');
    await this.checkPriorityQueue();
    
    // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –∑–∞–ø—É—Å–∫–∞
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ —Å–∏—Å—Ç–µ–º—ã:', error.message);
    await this.stop();
  }
}
```

### 4. –û–±–Ω–æ–≤–ª–µ–Ω main-universal.js
**–§–∞–π–ª**: `scripts/main-universal.js`

```javascript
console.log('üìã –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:');
console.log('   ‚Ä¢ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –æ—á–µ—Ä–µ–¥—å (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–µ—Ä–≤–æ–π)');
console.log('   ‚Ä¢ –û—Å–Ω–æ–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏ (monitor:virtual)');
console.log('   ‚Ä¢ Telegram –±–æ—Ç (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ —Å–∏–Ω–≥–ª—Ç–æ–Ω)');
```

### 5. –°–æ–∑–¥–∞–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

#### `scripts/test-priority-queue-check.js`
- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á
- –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—á–µ—Ä–µ–¥–∏

#### `scripts/test-startup-priority.js`
- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –ø–æ—Ä—è–¥–æ–∫ –∑–∞–ø—É—Å–∫–∞ —Å–∏—Å—Ç–µ–º—ã
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –æ—á–µ—Ä–µ–¥—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–µ—Ä–≤–æ–π
- –í–µ–¥–µ—Ç –ª–æ–≥ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

#### `scripts/demo-priority-queue.js`
- –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### 6. –î–æ–±–∞–≤–ª–µ–Ω—ã npm —Å–∫—Ä–∏–ø—Ç—ã
**–§–∞–π–ª**: `package.json`

```json
{
  "scripts": {
    "test:priority-queue": "node scripts/test-priority-queue-check.js",
    "test:startup-priority": "node scripts/test-startup-priority.js",
    "demo:priority-queue": "node scripts/demo-priority-queue.js"
  }
}
```

### 7. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
**–§–∞–π–ª**: `README.md`

- –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –æ—á–µ—Ä–µ–¥—å"
- –û–±–Ω–æ–≤–ª–µ–Ω—ã CLI –∫–æ–º–∞–Ω–¥—ã
- –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

## üìä –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∑–∞–¥–∞—á

1. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1**: –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–¥–µ–ª–∫–∏ (–∫–∞–∂–¥—ã–µ 30 —Å–µ–∫) - –≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
2. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2**: Watchlist (–∫–∞–∂–¥—ã–µ 30 —Å–µ–∫) - —Å—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç  
3. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3**: –ê–Ω–æ–º–∞–ª–∏–∏ (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω) - –Ω–∏–∑—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- **–ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—á–µ—Ä–µ–¥–∏** –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤** –∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** –±–∞–∑–æ–≤—ã—Ö –∑–∞–¥–∞—á
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è** —Å–∏—Å—Ç–µ–º—ã
- **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –¢–µ—Å—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏
npm run test:priority-queue

# –¢–µ—Å—Ç –ø–æ—Ä—è–¥–∫–∞ –∑–∞–ø—É—Å–∫–∞
npm run test:startup-priority

# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
npm run demo:priority-queue

# –ü–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
npm run run
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ `npm run run` –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –æ—á–µ—Ä–µ–¥—å —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è **–ø–µ—Ä–≤—ã–º –¥–µ–ª–æ–º**, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—á–µ—Ä–µ–¥—å—é –∑–∞–¥–∞—á. 